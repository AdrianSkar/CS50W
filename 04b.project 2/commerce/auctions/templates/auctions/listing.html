{% extends "auctions/layout.html" %}

{% block body %}


<div class="container">
{% if message %}
<div class="alert {{ alert_type }} alert-dismissible fade show" role="alert">
	{{ message }}
	<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endif %}
	<h2>{{ listing.title }}</h2>
	{% if listing.watchlist %}
	<button class="btn badge bg-success mb-2">Watching</button>
	{% else %}
	<button class="btn badge bg-secondary mb-2">Add to watchlist</button><br>
	{% endif %}

	<div class="row mb-2">
		<img src="{{ listing.image_url }}" alt="{{ listing.title }}'s image" class="rounded col-6">

		<div class="col-6">
			<p>{{ listing.desc }}</p>
			<span><b>Current price: </b>{{ last_bid|default:listing.start_bid }}</span>

			<form action="{% url 'bid' listing.id %}" method='POST'>
				{% csrf_token %}
				<input type="hidden" name="listing_id" value={{ listing.id }}>
				{{ form.as_p }}
				<input type="submit" value="Place bid">
			</form>
		</div>
		</div>
	<h4>Details:</h4>
	<ul>
		<li>Listed by: {{ listing.lister }}</li>
		<li>Category: {{ listing.category|default_if_none:"Uncategorized" }}</li>
	</ul>
</div>

{% endblock %}